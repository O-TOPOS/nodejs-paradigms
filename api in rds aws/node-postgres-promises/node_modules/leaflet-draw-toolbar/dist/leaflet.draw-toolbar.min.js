!function(o,t,e){"use strict";LeafletToolbar.DrawAction={fromHandler:function(o,t,e){return LeafletToolbar.ToolbarAction.extend({options:{toolbarIcon:L.extend({},LeafletToolbar.ToolbarAction.prototype.options.toolbarIcon,t),subToolbar:e||LeafletToolbar.ToolbarAction.prototype.options.subToolbar},initialize:function(t,e){var a=this;this._handler=new o(t,e),this._handler.on("disabled",function(){a.disable()}),LeafletToolbar.ToolbarAction.prototype.initialize.call(this,e)},enable:function(o){this._handler.enable(),LeafletToolbar.ToolbarAction.prototype.enable.call(this,o)},disable:function(){this._handler.disable(),LeafletToolbar.ToolbarAction.prototype.disable.call(this)},setOptions:function(o){this._handler.setOptions(o),LeafletToolbar.ToolbarAction.prototype.setOptions.call(this,o)}})}},LeafletToolbar.DrawAction.Cancel=LeafletToolbar.ToolbarAction.extend({options:{toolbarIcon:{html:"Cancel"}},initialize:function(o,t){this.drawing=t,LeafletToolbar.ToolbarAction.prototype.initialize.call(this)},addHooks:function(){this.drawing.disable(),this.disable()}}),LeafletToolbar.DrawAction.RemoveLastPoint=LeafletToolbar.ToolbarAction.extend({options:{toolbarIcon:{html:L.drawLocal.draw.toolbar.undo.text}},initialize:function(o,t){this.drawing=t,LeafletToolbar.ToolbarAction.prototype.initialize.call(this)},addHooks:function(){this.drawing.deleteLastVertex(),this.disable()}}),LeafletToolbar.DrawAction.Circle=LeafletToolbar.DrawAction.fromHandler(L.Draw.Circle,{className:"leaflet-draw-draw-circle",tooltip:L.drawLocal.draw.toolbar.buttons.circle},new LeafletToolbar({actions:[LeafletToolbar.DrawAction.Cancel]})),LeafletToolbar.DrawAction.Marker=LeafletToolbar.DrawAction.fromHandler(L.Draw.Marker,{className:"leaflet-draw-draw-marker",tooltip:L.drawLocal.draw.toolbar.buttons.marker},new LeafletToolbar({actions:[LeafletToolbar.DrawAction.Cancel]})),LeafletToolbar.DrawAction.Polygon=LeafletToolbar.DrawAction.fromHandler(L.Draw.Polygon,{className:"leaflet-draw-draw-polygon",tooltip:L.drawLocal.draw.toolbar.buttons.polygon},new LeafletToolbar({actions:[LeafletToolbar.DrawAction.Cancel,LeafletToolbar.DrawAction.RemoveLastPoint]})),LeafletToolbar.DrawAction.Polygon.prototype.deleteLastVertex=function(){this._handler.deleteLastVertex()},LeafletToolbar.DrawAction.Polyline=LeafletToolbar.DrawAction.fromHandler(L.Draw.Polyline,{className:"leaflet-draw-draw-polyline",tooltip:L.drawLocal.draw.toolbar.buttons.polyline},new LeafletToolbar({actions:[LeafletToolbar.DrawAction.Cancel,LeafletToolbar.DrawAction.RemoveLastPoint]})),LeafletToolbar.DrawAction.Polyline.prototype.deleteLastVertex=function(){this._handler.deleteLastVertex()},LeafletToolbar.DrawAction.Rectangle=LeafletToolbar.DrawAction.fromHandler(L.Draw.Rectangle,{className:"leaflet-draw-draw-rectangle",tooltip:L.drawLocal.draw.toolbar.buttons.rectangle},new LeafletToolbar({actions:[LeafletToolbar.DrawAction.Cancel]})),LeafletToolbar.DrawToolbar=LeafletToolbar.Control.extend({options:{actions:[LeafletToolbar.DrawAction.Polygon,LeafletToolbar.DrawAction.Polyline,LeafletToolbar.DrawAction.Marker,LeafletToolbar.DrawAction.Rectangle,LeafletToolbar.DrawAction.Circle],className:"leaflet-draw-toolbar"}}),LeafletToolbar.EditToolbar={},LeafletToolbar.EditAction={fromHandler:function(o,t,e){return LeafletToolbar.ToolbarAction.extend({options:{toolbarIcon:L.extend({},LeafletToolbar.ToolbarAction.prototype.options.toolbarIcon,t),subToolbar:e||LeafletToolbar.ToolbarAction.prototype.options.subToolbar},initialize:function(t,e,a){var l=this;(a=a||{}).featureGroup=e,this._handler=new o(t,a),this._handler.on("disabled",function(){l.disable()}),LeafletToolbar.ToolbarAction.prototype.initialize.call(this,a)},enable:function(o){this._handler.enable(),LeafletToolbar.ToolbarAction.prototype.enable.call(this,o)},disable:function(){this._handler.disable(),LeafletToolbar.ToolbarAction.prototype.disable.call(this)},setOptions:function(o){this._handler.setOptions(o),LeafletToolbar.ToolbarAction.prototype.setOptions.call(this,o)},revertLayers:function(){this._handler.revertLayers()},save:function(){this._handler.save()}})}},LeafletToolbar.EditAction.Control={},LeafletToolbar.EditAction.Control.Save=LeafletToolbar.ToolbarAction.extend({options:{toolbarIcon:{html:"Save"}},initialize:function(o,t,e){this.editing=e,LeafletToolbar.ToolbarAction.prototype.initialize.call(this)},addHooks:function(){this.editing.save(),this.editing.disable()}}),LeafletToolbar.EditAction.Control.Undo=LeafletToolbar.ToolbarAction.extend({options:{toolbarIcon:{html:"Undo"}},initialize:function(o,t,e){this.editing=e,LeafletToolbar.ToolbarAction.prototype.initialize.call(this)},addHooks:function(){this.editing.revertLayers(),this.editing.disable()}}),LeafletToolbar.EditAction.Control.Edit=LeafletToolbar.EditAction.fromHandler(L.EditToolbar.Edit,{className:"leaflet-draw-edit-edit",tooltip:"Edit features"},new LeafletToolbar({actions:[LeafletToolbar.EditAction.Control.Save,LeafletToolbar.EditAction.Control.Undo]})),LeafletToolbar.EditAction.Control.Delete=LeafletToolbar.EditAction.fromHandler(L.EditToolbar.Delete,{className:"leaflet-draw-edit-remove",tooltip:"Remove features"},new LeafletToolbar({actions:[LeafletToolbar.EditAction.Control.Save,LeafletToolbar.EditAction.Control.Undo]})),LeafletToolbar.EditToolbar.Control=LeafletToolbar.Control.extend({options:{actions:[LeafletToolbar.EditAction.Control.Edit,LeafletToolbar.EditAction.Control.Delete],className:"leaflet-draw-toolbar"}}),LeafletToolbar.EditAction.Popup={},LeafletToolbar.EditAction.Popup.Edit=LeafletToolbar.ToolbarAction.extend({options:{toolbarIcon:{className:"leaflet-draw-edit-edit"}},initialize:function(o,t,e){this._map=o,this._shape=t,this._shape.options.editing=this._shape.options.editing||{},LeafletToolbar.ToolbarAction.prototype.initialize.call(this,o,e)},enable:function(){var o=this._map,t=this._shape;t.editing.enable(),o.removeLayer(this.toolbar),o.on("click",function(){this.save(),t.editing.disable()},this)},save:function(){var o=this._map,t=this._shape;t.edited&&o.fire(L.Draw.Event.EDITED,{layers:L.layerGroup([t])}),t.edited=!1}}),LeafletToolbar.EditAction.Popup.Delete=LeafletToolbar.ToolbarAction.extend({options:{toolbarIcon:{className:"leaflet-draw-edit-remove"}},initialize:function(o,t,e){this._map=o,this._shape=t,LeafletToolbar.ToolbarAction.prototype.initialize.call(this,o,e)},addHooks:function(){var o=this._map;o.removeLayer(this._shape),o.removeLayer(this.toolbar),console.log("firing draw:deleted"),o.fire(L.Draw.Event.DELETED,{layers:L.layerGroup([this._shape])})}}),LeafletToolbar.EditToolbar.Popup=LeafletToolbar.Popup.extend({options:{actions:[LeafletToolbar.EditAction.Popup.Edit,LeafletToolbar.EditAction.Popup.Delete],className:"leaflet-draw-toolbar"},onAdd:function(o){var t=this._arguments[1];t instanceof L.Marker&&(this.options.anchor=L.point(t.options.icon.options.popupAnchor)),LeafletToolbar.Popup.prototype.onAdd.call(this,o)}})}(window,document);